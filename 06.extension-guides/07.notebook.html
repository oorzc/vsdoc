<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.53" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://oorzc.cn/06.extension-guides/07.notebook.html"><meta property="og:site_name" content="vscodeæ’ä»¶å¼€å‘æ–‡æ¡£"><meta property="og:title" content="ç¬”è®°æœ¬ API"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" rel="stylesheet"><link rel="icon" href="/favicon.ico"><link rel="icon" href="/icons/apple-touch-icon.png" type="image/png" sizes="512x512"><link rel="icon" href="/icons/apple-touch-icon.png" type="image/png" sizes="192x192"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#fff"><link rel="apple-touch-icon" href="/icons/apple-touch-icon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/icons/apple-touch-icon.png"><meta name="msapplication-TileColor" content="#ffffff"><title>ç¬”è®°æœ¬ API | vscodeæ’ä»¶å¼€å‘æ–‡æ¡£</title><meta name="description" content="vscodeæ’ä»¶å¼€å‘æ–‡æ¡£">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style.28776aee.css" as="style" /><link rel="stylesheet" href="/assets/style.28776aee.css" />
    <link rel="modulepreload" href="/assets/app.ed9f300c.js"><link rel="modulepreload" href="/assets/07.notebook.html.adb88b8d.js"><link rel="modulepreload" href="/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/assets/07.notebook.html.b6aad240.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo.jpg" alt="vscodeæ’ä»¶å¼€å‘æ–‡æ¡£"><!----><span class="site-name hide-in-pad">vscodeæ’ä»¶å¼€å‘æ–‡æ¡£</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><!----><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><!----><!----><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><div id="docsearch-container"></div><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">é¢„å¤‡çŸ¥è¯†</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">api</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">ç¬¬ä¸€æ­¥</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">å¼€å‘æ’ä»¶</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">æ’ä»¶åŠŸèƒ½</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">æ’ä»¶æŒ‡å—</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/06.extension-guides/01.command.html" class="nav-link sidebar-link sidebar-page" aria-label="å‘½ä»¤"><!---->å‘½ä»¤<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/06.extension-guides/02.color-theme.html" class="nav-link sidebar-link sidebar-page" aria-label="è‰²å½©ä¸»é¢˜"><!---->è‰²å½©ä¸»é¢˜<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/06.extension-guides/03.file-icon-theme.html" class="nav-link sidebar-link sidebar-page" aria-label="å›¾æ ‡ä¸»é¢˜"><!---->å›¾æ ‡ä¸»é¢˜<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/06.extension-guides/04.product-icon-theme.html" class="nav-link sidebar-link sidebar-page" aria-label="äº§å“å›¾æ ‡ä¸»é¢˜ï¼ˆé¢„è§ˆï¼‰"><!---->äº§å“å›¾æ ‡ä¸»é¢˜ï¼ˆé¢„è§ˆï¼‰<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/06.extension-guides/05.tree-view.html" class="nav-link sidebar-link sidebar-page" aria-label="æ ‘è§†å›¾"><!---->æ ‘è§†å›¾<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/06.extension-guides/06.webview.html" class="nav-link sidebar-link sidebar-page" aria-label="Webview API"><!---->Webview API<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/06.extension-guides/07.notebook.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="ç¬”è®°æœ¬ API"><!---->ç¬”è®°æœ¬ API<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/06.extension-guides/07.notebook.html#ç¬”è®°æœ¬çš„æ„æˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¬”è®°æœ¬çš„æ„æˆ"><!---->ç¬”è®°æœ¬çš„æ„æˆ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/06.extension-guides/07.notebook.html#å†…å®¹ä¾›åº”å™¨å‡½æ•°" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å†…å®¹ä¾›åº”å™¨å‡½æ•°"><!---->å†…å®¹ä¾›åº”å™¨å‡½æ•°<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/06.extension-guides/07.notebook.html#ä¸¾ä¸ªä¾‹å­" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸¾ä¸ªä¾‹å­"><!---->ä¸¾ä¸ªä¾‹å­<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/06.extension-guides/07.notebook.html#å†…æ ¸" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å†…æ ¸"><!---->å†…æ ¸<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/06.extension-guides/07.notebook.html#æœ€ä½³å®è·µ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æœ€ä½³å®è·µ"><!---->æœ€ä½³å®è·µ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/06.extension-guides/07.notebook.html#è¾“å‡ºç±»å‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è¾“å‡ºç±»å‹"><!---->è¾“å‡ºç±»å‹<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/06.extension-guides/07.notebook.html#æ–‡æœ¬è¾“å‡º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ–‡æœ¬è¾“å‡º"><!---->æ–‡æœ¬è¾“å‡º<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/06.extension-guides/07.notebook.html#é”™è¯¯è¾“å‡º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é”™è¯¯è¾“å‡º"><!---->é”™è¯¯è¾“å‡º<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/06.extension-guides/07.notebook.html#å¯Œæ–‡æœ¬è¾“å‡º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¯Œæ–‡æœ¬è¾“å‡º"><!---->å¯Œæ–‡æœ¬è¾“å‡º<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/06.extension-guides/07.notebook.html#è¾“å‡ºæ¸²æŸ“å™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è¾“å‡ºæ¸²æŸ“å™¨"><!---->è¾“å‡ºæ¸²æŸ“å™¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/06.extension-guides/07.notebook.html#ä¸€ä¸ªç®€å•çš„-éäº¤äº’å¼çš„æ¸²æŸ“å™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸€ä¸ªç®€å•çš„, éäº¤äº’å¼çš„æ¸²æŸ“å™¨"><!---->ä¸€ä¸ªç®€å•çš„, éäº¤äº’å¼çš„æ¸²æŸ“å™¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/06.extension-guides/07.notebook.html#äº¤äº’å¼çš„ç¬”è®°æœ¬" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äº¤äº’å¼çš„ç¬”è®°æœ¬"><!---->äº¤äº’å¼çš„ç¬”è®°æœ¬<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/06.extension-guides/07.notebook.html#è°ƒè¯•æ”¯æŒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è°ƒè¯•æ”¯æŒ"><!---->è°ƒè¯•æ”¯æŒ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/06.extension-guides/08.virtual-documents.html" class="nav-link sidebar-link sidebar-page" aria-label="è™šæ‹Ÿæ–‡æ¡£"><!---->è™šæ‹Ÿæ–‡æ¡£<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/06.extension-guides/09.task-provider.html" class="nav-link sidebar-link sidebar-page" aria-label="ä»»åŠ¡"><!---->ä»»åŠ¡<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/06.extension-guides/10.scm-provider.html" class="nav-link sidebar-link sidebar-page" aria-label="æºæ§åˆ¶API"><!---->æºæ§åˆ¶API<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/06.extension-guides/11.debugger-extension.html" class="nav-link sidebar-link sidebar-page" aria-label="è°ƒè¯•å™¨æ’ä»¶"><!---->è°ƒè¯•å™¨æ’ä»¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/06.extension-guides/12.markdown-extension.html" class="nav-link sidebar-link sidebar-page" aria-label="Markdownæ’ä»¶"><!---->Markdownæ’ä»¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/06.extension-guides/13.custom-editors.html" class="nav-link sidebar-link sidebar-page" aria-label="è‡ªå®šä¹‰ç¼–è¾‘å™¨ API"><!---->è‡ªå®šä¹‰ç¼–è¾‘å™¨ API<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/06.extension-guides/14.custom-data-extension.html" class="nav-link sidebar-link sidebar-page" aria-label="è‡ªå®šä¹‰æ•°æ®æ’ä»¶"><!---->è‡ªå®šä¹‰æ•°æ®æ’ä»¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/06.extension-guides/" class="nav-link sidebar-link sidebar-page" aria-label="æ’ä»¶æŒ‡å—"><!---->æ’ä»¶æŒ‡å—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">è¯­è¨€æ’ä»¶</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">è¿›é˜¶ä¸»é¢˜</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">ï¸ï¸å‚è€ƒ</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">å…¶ä»–1</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">å…¶ä»–2</span><span class="arrow right"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->ç¬”è®°æœ¬ API</h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="author-item">oorzc</span></span><span property="author" content="oorzc"></span></span><!----><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 13 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT13M"></span><span class="words-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 3989 å­—</span><meta property="wordCount" content="3989"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/06.extension-guides/07.notebook.html#ç¬”è®°æœ¬çš„æ„æˆ" class="router-link-active router-link-exact-active toc-link level2">ç¬”è®°æœ¬çš„æ„æˆ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/06.extension-guides/07.notebook.html#å†…å®¹ä¾›åº”å™¨å‡½æ•°" class="router-link-active router-link-exact-active toc-link level2">å†…å®¹ä¾›åº”å™¨å‡½æ•°</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/06.extension-guides/07.notebook.html#ä¸¾ä¸ªä¾‹å­" class="router-link-active router-link-exact-active toc-link level3">ä¸¾ä¸ªä¾‹å­</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/06.extension-guides/07.notebook.html#å†…æ ¸" class="router-link-active router-link-exact-active toc-link level2">å†…æ ¸</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/06.extension-guides/07.notebook.html#æœ€ä½³å®è·µ" class="router-link-active router-link-exact-active toc-link level3">æœ€ä½³å®è·µ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/06.extension-guides/07.notebook.html#è¾“å‡ºç±»å‹" class="router-link-active router-link-exact-active toc-link level2">è¾“å‡ºç±»å‹</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/06.extension-guides/07.notebook.html#æ–‡æœ¬è¾“å‡º" class="router-link-active router-link-exact-active toc-link level3">æ–‡æœ¬è¾“å‡º</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/06.extension-guides/07.notebook.html#é”™è¯¯è¾“å‡º" class="router-link-active router-link-exact-active toc-link level3">é”™è¯¯è¾“å‡º</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/06.extension-guides/07.notebook.html#å¯Œæ–‡æœ¬è¾“å‡º" class="router-link-active router-link-exact-active toc-link level3">å¯Œæ–‡æœ¬è¾“å‡º</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/06.extension-guides/07.notebook.html#è¾“å‡ºæ¸²æŸ“å™¨" class="router-link-active router-link-exact-active toc-link level2">è¾“å‡ºæ¸²æŸ“å™¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/06.extension-guides/07.notebook.html#ä¸€ä¸ªç®€å•çš„-éäº¤äº’å¼çš„æ¸²æŸ“å™¨" class="router-link-active router-link-exact-active toc-link level3">ä¸€ä¸ªç®€å•çš„, éäº¤äº’å¼çš„æ¸²æŸ“å™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/06.extension-guides/07.notebook.html#äº¤äº’å¼çš„ç¬”è®°æœ¬" class="router-link-active router-link-exact-active toc-link level3">äº¤äº’å¼çš„ç¬”è®°æœ¬</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/06.extension-guides/07.notebook.html#è°ƒè¯•æ”¯æŒ" class="router-link-active router-link-exact-active toc-link level2">è°ƒè¯•æ”¯æŒ</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="ç¬”è®°æœ¬-api" tabindex="-1"><a class="header-anchor" href="#ç¬”è®°æœ¬-api" aria-hidden="true">#</a> ç¬”è®°æœ¬ API</h1><p>ç¬”è®°æœ¬ API å…è®¸ Visual Studio Code ä»¥ç¬”è®°æœ¬çš„å½¢å¼æ‰“å¼€æ–‡ä»¶ï¼Œæ‰§è¡Œç¬”è®°æœ¬ä»£ç å•å…ƒï¼ŒæŠŠç¬”è®°æœ¬çš„å†…å®¹ä»¥å¤šç§ä¸°å¯Œçš„å¹¶ä¸”å¯äº¤äº’å¼çš„æ ¼å¼å±•ç°ã€‚åœ¨ Visual Studio Code é‡Œé¢ï¼Œä½ å¯ä»¥è·å¾—ä¸ Jupyterã€Google Colab ç­‰æµè¡Œçš„ç¬”è®°æœ¬ç›¸ä¼¼çš„ä¹¦å†™ä½“éªŒã€‚</p><p>!&gt; **æ³¨æ„ï¼š**ç¬”è®°æœ¬ç›¸å…³çš„ API ç›®å‰è¿˜å¤„äºå¼€å‘çŠ¶æ€ï¼Œæ‰€ä»¥ç›®å‰åªèƒ½åœ¨ <a href="https://github.com/microsoft/vscode-docs/blob/master/insiders" target="_blank" rel="noopener noreferrer">VS Code Insiders<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ç‰ˆæœ¬å†…éƒ¨ä½¿ç”¨ï¼ŒåŒæ—¶éœ€è¦ç»™ä½ çš„æ’ä»¶é¡¹ç›®æ·»åŠ  <code>vscode.proposed.d.ts</code> æ–‡ä»¶ã€‚æƒ³äº†è§£æ›´å¤šçš„æœ‰å…³äºè¯•éªŒæ€§ API çš„å†…å®¹ï¼Œ å¯ä»¥ <a href="https://github.com/microsoft/vscode-docs/blob/master/api/advanced-topics/using-proposed-api" target="_blank" rel="noopener noreferrer">ç‚¹è¿™é‡Œ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p><h2 id="ç¬”è®°æœ¬çš„æ„æˆ" tabindex="-1"><a class="header-anchor" href="#ç¬”è®°æœ¬çš„æ„æˆ" aria-hidden="true">#</a> ç¬”è®°æœ¬çš„æ„æˆ</h2><hr><p>ä¸€ä¸ªç¬”è®°æœ¬ç”±ä¸€ç³»åˆ—ä»£ç å—ä»¥åŠè¾“å‡ºæ„æˆã€‚ä»£ç å—ç”± VS Code æ ¸å¿ƒè¿›ç¨‹è´Ÿè´£æ¸²æŸ“ï¼Œå®ƒæœ‰ä¸¤ç§ç±»å‹ï¼Œä¸€ç§æ˜¯ <strong>Markdown ä»£ç å—</strong>ï¼Œå¦ä¸€ç§æ˜¯<strong>å¸¸è§„ä»£ç å—</strong>ã€‚è¾“å‡ºçš„æ ¼å¼æ˜¯å¤šç§å¤šæ ·çš„ï¼Œæ¯”å¦‚æ™®é€šæ–‡æœ¬ã€JSONã€å›¾ç‰‡ã€HTMLã€‚å…¶å®ƒçš„åº”ç”¨ç›¸å…³çš„æ•°æ®ä»¥åŠäº¤äº’å¼çš„å°ç¨‹åºï¼Œç”±æ’ä»¶<strong>è‡ªè¡Œ</strong>è´Ÿè´£æ¸²æŸ“ã€‚</p><p>ä»£ç å—çš„è¯»å†™æ“ä½œæ˜¯ç”± <code>NotebookContentProvider</code> æ§åˆ¶çš„ï¼Œ<code>NotebookContentProvider</code> ä»æ–‡ä»¶ç³»ç»Ÿä¸­è¯»å–æ•°æ®å¹¶å°†å…¶è½¬åŒ–ä¸ºä»£ç å—ï¼ŒåŒæ—¶å°†ç¬”è®°æœ¬çš„æ”¹åŠ¨åŒæ­¥ç»™æ–‡ä»¶ç³»ç»Ÿã€‚<code>NotebookKernel</code> å¤„ç†æ¥è‡ªä»£ç å—çš„å†…å®¹ï¼Œå¹¶è¾“å‡ºå„ç§å„æ ·çš„æ ¼å¼ï¼ŒåŒ…æ‹¬çº¯æ–‡æœ¬ã€æ ¼å¼åŒ–æ–‡æ¡£æˆ–è€…äº¤äº’å¼å°ç¨‹åºã€‚åº”ç”¨ç›¸å…³çš„è¾“å‡ºæ ¼å¼å’Œäº¤äº’å¼å°ç¨‹åºåˆ™ç”± <code>NotebookOutputRenderer</code> æ¸²æŸ“ã€‚</p><p>ä¸€å›¾èƒœåƒè¨€ï¼š</p><p><img src="https://media.githubusercontent.com/media/microsoft/vscode-docs/master/api/extension-guides/images/notebook/architecture-overview.png" alt="ç»“æ„æ¦‚è§ˆ"></p><h2 id="å†…å®¹ä¾›åº”å™¨å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#å†…å®¹ä¾›åº”å™¨å‡½æ•°" aria-hidden="true">#</a> å†…å®¹ä¾›åº”å™¨å‡½æ•°</h2><hr><p><a href="https://github.com/microsoft/vscode/blob/43184b2beda9edb613caadc2bab29ec50bad863f/src/vs/vscode.proposed.d.ts#L1792-L1805" target="_blank" rel="noopener noreferrer">å‚è€ƒ NotebookContentProvider API<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>å¯ä»¥ä½¿ç”¨ <code>NotebookContentProvider</code> ç”Ÿæˆä¸€æ®µæ®µçš„ Markdown å’Œä»£ç å—ã€‚ä¸æ­¤åŒæ—¶ï¼Œ<code>NotebookContentProvider</code> ä¼šå°†ç¬”è®°æœ¬ä¸­äº§ç”Ÿçš„æ›´æ”¹åŒæ­¥åˆ°æºæ–‡ä»¶ä¸­ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€äº›èŒƒä¾‹ï¼š</p><ul><li><a href="https://github.com/microsoft/notebook-extension-samples/tree/master/notebook-provider" target="_blank" rel="noopener noreferrer">.ipynb å†…å®¹ä¾›åº”å™¨å‡½æ•°<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼šç¬”è®°æœ¬é‡‡ç”¨ <a href="https://nbformat.readthedocs.io/en/latest/format_description.html" target="_blank" rel="noopener noreferrer">Jupyter<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ ¼å¼ã€‚</li><li><a href="https://github.com/microsoft/vscode-markdown-notebook" target="_blank" rel="noopener noreferrer">Markdown å†…å®¹ä¾›åº”å™¨å‡½æ•°<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼šä»¥ç¬”è®°æœ¬çš„æ ¼å¼æ‰“å¼€å’Œç¼–è¾‘ Markdownã€‚</li></ul><h3 id="ä¸¾ä¸ªä¾‹å­" tabindex="-1"><a class="header-anchor" href="#ä¸¾ä¸ªä¾‹å­" aria-hidden="true">#</a> ä¸¾ä¸ªä¾‹å­</h3><p>ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç®€åŒ–ç‰ˆçš„åç¼€åä¸º <code>.notebook</code> çš„ç¬”è®°æœ¬æä¾›å•†æ’ä»¶ï¼Œç”¨æ¥æŸ¥çœ‹ <a href="https://nbformat.readthedocs.io/en/latest/format_description.html" target="_blank" rel="noopener noreferrer">Jupyter<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ ¼å¼çš„æ–‡ä»¶ã€‚</p><p>å†…å®¹ä¾›åº”å™¨å‡½æ•°æ˜¯å®šä¹‰åœ¨ <code>package.json</code> çš„ <code>contributes.notebookProvider</code> å­—æ®µä¸­çš„ï¼Œåƒä¸‹é¢è¿™æ ·ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    ...
    <span class="token property">&quot;activationEvents&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;onNotebook:my-notebook-provider&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;contributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        ...
        <span class="token property">&quot;notebookProvider&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;viewType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my-notebook-provider&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;displayName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;My Notebook Provider&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;selector&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token property">&quot;filenamePattern&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*.notebook&quot;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶ååœ¨æ’ä»¶çš„ activate äº‹ä»¶ä¸­æ³¨å†Œï¼š</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> vscode <span class="token keyword">from</span> <span class="token string">&#39;vscode&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span>context<span class="token operator">:</span> vscode<span class="token punctuation">.</span>ExtensionContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
    vscode<span class="token punctuation">.</span>notebook<span class="token punctuation">.</span><span class="token function">registerNotebookContentProvider</span><span class="token punctuation">(</span>
      <span class="token string">&#39;my-notebook-provider&#39;</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">SampleProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">SampleProvider</span> <span class="token keyword">implements</span> <span class="token class-name">vscode</span><span class="token punctuation">.</span>NotebookContentProvider <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">openNotebook</span><span class="token punctuation">(</span>uri<span class="token operator">:</span> vscode<span class="token punctuation">.</span>Uri<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>vscode<span class="token punctuation">.</span>NotebookData<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> content <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">await</span> vscode<span class="token punctuation">.</span>workspace<span class="token punctuation">.</span>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      languages<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      metadata<span class="token operator">:</span> <span class="token punctuation">{</span> custom<span class="token operator">:</span> content<span class="token punctuation">.</span>metadata <span class="token punctuation">}</span><span class="token punctuation">,</span>
      cells<span class="token operator">:</span> content<span class="token punctuation">.</span>cells<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>cell<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cell<span class="token punctuation">.</span>cell_type <span class="token operator">===</span> <span class="token string">&#39;markdown&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            cellKind<span class="token operator">:</span> vscode<span class="token punctuation">.</span>CellKind<span class="token punctuation">.</span>Markdown<span class="token punctuation">,</span>
            source<span class="token operator">:</span> cell<span class="token punctuation">.</span>source<span class="token punctuation">,</span>
            language<span class="token operator">:</span> <span class="token string">&#39;markdown&#39;</span><span class="token punctuation">,</span>
            outputs<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            metadata<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cell<span class="token punctuation">.</span>cell_type <span class="token operator">===</span> <span class="token string">&#39;code&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            cellKind<span class="token operator">:</span> vscode<span class="token punctuation">.</span>CellKind<span class="token punctuation">.</span>Code<span class="token punctuation">,</span>
            source<span class="token operator">:</span> cell<span class="token punctuation">.</span>source<span class="token punctuation">,</span>
            language<span class="token operator">:</span> content<span class="token punctuation">.</span>metadata<span class="token operator">?.</span>language_info<span class="token operator">?.</span>name <span class="token operator">||</span> <span class="token string">&#39;python&#39;</span><span class="token punctuation">,</span>
            outputs<span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token comment">/* not implemented */</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            metadata<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;Unexpected cell:&#39;</span><span class="token punctuation">,</span> cell<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ä¸‹é¢æ˜¯ä¸€äº›ä¼ªæ–¹æ³•ï¼Œä¸æœ¬ä¾‹æ— å…³</span>
  onDidChangeNotebook <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">vscode</span><span class="token punctuation">.</span><span class="token generic-function"><span class="token function">EventEmitter</span><span class="token generic class-name"><span class="token operator">&lt;</span>vscode<span class="token punctuation">.</span>NotebookDocumentEditEvent<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>event<span class="token punctuation">;</span>
  <span class="token keyword">async</span> <span class="token function">resolveNotebook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">async</span> <span class="token function">saveNotebook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">async</span> <span class="token function">saveNotebookAs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">async</span> <span class="token function">backupNotebook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>vscode<span class="token punctuation">.</span>NotebookDocumentBackup<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token function-variable function">delete</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç´§æ¥ç€ï¼Œå¯åŠ¨ä½ çš„æ’ä»¶å¹¶åœ¨æ’ä»¶çª—å£ä¸­æ‰“å¼€åç¼€åä¸º <code>.notebook</code> çš„ Jupyter æ ¼å¼æ–‡ä»¶ï¼š</p><p><img src="https://media.githubusercontent.com/media/microsoft/vscode-docs/master/api/extension-guides/images/notebook/ipynb-simple-provider.png" alt="ç®€å•çš„ä¾›åº”å•†â€”â€”ipynb"></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å¼€å’Œç¼–è¾‘ Jupyter æ ¼å¼çš„ç¬”è®°æœ¬ï¼Œå¹¶ä¸”ä»¥æ™®é€šæ–‡æœ¬å’Œ Markdown çš„å½¢å¼é¢„è§ˆä»£ç å—ã€‚ç„¶è€Œï¼Œåœ¨ç¼–è¾‘çš„æ—¶å€™ç”±äºå¹¶ä¸ä¼šè‡ªåŠ¨å¹¶æŒç»­æ€§çš„å°†å†…å®¹å†™å…¥åˆ°ç£ç›˜ä¸­ï¼Œæ‰€ä»¥éœ€è¦å®ç° <code>saveNotebook</code> æ–¹æ³•ï¼Œä¸Šé¢çš„ä»£ç ä¸­ä¹Ÿæåˆ°äº†è¿™ä¸ªæ–¹æ³•ã€‚åŒæ—¶ï¼Œå¦‚æœè¦è¿è¡Œæ¯ä¸ªä»£ç å—ï¼Œéœ€è¦å®ç° <code>NotebookKernel</code> æ–¹æ³•ã€‚</p><p>!&gt; **æ³¨æ„ï¼š**é»˜è®¤æƒ…å†µä¸‹ï¼Œè¾“å‡ºçš„ MIME ç±»å‹çš„é¡ºåºæ˜¯é€šè¿‡ç¬”è®°æœ¬æä¾›çš„ <code>NotebookData#metadata.displayOrder</code> å±æ€§æ¥å®šä¹‰çš„ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ <code>openNotebook</code> æ–¹æ³•ä¸­è‡ªè¡Œè®¾ç½®ã€‚</p><h2 id="å†…æ ¸" tabindex="-1"><a class="header-anchor" href="#å†…æ ¸" aria-hidden="true">#</a> å†…æ ¸</h2><hr><p><a href="https://github.com/microsoft/vscode/blob/43184b2beda9edb613caadc2bab29ec50bad863f/src/vs/vscode.proposed.d.ts#L1807-L1812" target="_blank" rel="noopener noreferrer">å‚è€ƒ NotebookKernel API<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><code>NotebookKernel</code> è´Ÿè´£æ¥æ”¶ä¸€ä¸ªä»£ç å•å…ƒï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºä¸€ä¸ªæˆ–ä¸€ç»„è¾“å‡ºã€‚</p><p>å¯ä»¥é€šè¿‡è®¾ç½® <code>NotebookContentProvider#kernel</code> å±æ€§ï¼Œå°†ç¬”è®°æœ¬å†…æ ¸ï¼ˆ<code>NotebookKernel</code>ï¼‰ä¸ä¸€ä¸ªå†…å®¹ä¾›åº”å™¨å‡½æ•°ç›´æ¥å…³è”ï¼›æˆ–è€…è°ƒç”¨ <code>vscode.registerNotebookKernel</code> æ–¹æ³•æ¥å…¨å±€æ³¨å†Œï¼Œ<code>registerNotebookKernel</code> æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</p><ul><li><p>ä¸€ä¸ªå†…æ ¸çš„æ ‡è¯†ç¬¦</p></li><li><p>ä¸éªŒè¯æ–‡ä»¶ç›¸å…³çš„æ­£åˆ™è¡¨è¾¾å¼åˆ—è¡¨</p></li><li><p>ä¸€ä¸ª <code>vscode.NotebookKernel</code> å¯¹è±¡ï¼š</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>vscode<span class="token punctuation">.</span>notebook<span class="token punctuation">.</span><span class="token function">registerNotebookKernel</span><span class="token punctuation">(</span>
    <span class="token string">&quot;http-kernel&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&quot;*.http&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        label<span class="token operator">:</span> <span class="token string">&quot;Http Kernel&quot;</span><span class="token punctuation">,</span>
        <span class="token function">executeCell</span><span class="token punctuation">(</span>document<span class="token operator">:</span> NotebookDocument<span class="token punctuation">,</span> cell<span class="token operator">:</span> NotebookCell<span class="token punctuation">,</span> token<span class="token operator">:</span> CancellationToken<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
        <span class="token function">executeAllCells</span><span class="token punctuation">(</span>document<span class="token operator">:</span> NotebookDocument<span class="token punctuation">,</span> token<span class="token operator">:</span> CancellationToken<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>å¦‚æœå·²ç»é€šè¿‡ <code>NotebookContentProvider#kernel</code> å±æ€§ä¸º <code>NotebookContentProvider</code> æ³¨å†Œäº†ä¸€ä¸ªå†…æ ¸ï¼Œé‚£ä¹ˆå½“ä½ æ‰“å¼€æŸä¸ªç¬”è®°æœ¬çš„æ—¶å€™ï¼Œ è¿™ä¸ªå†…æ ¸ä¼šè¢«é»˜è®¤é€‰ä¸­ã€‚å¦åˆ™ï¼Œä¼šä»å·²æ³¨å†Œçš„å†…æ ¸ä¸­é€‰å–ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <strong>Notebook: Select Notebook Kernel</strong> å‘½ä»¤æ¥è‡ªè¡Œåˆ‡æ¢è¦ä½¿ç”¨çš„å†…æ ¸ã€‚</p><p>ä¸€ä¸ªå°ä¾‹å­ï¼š</p><ul><li><a href="https://github.com/microsoft/vscode-github-issue-notebooks/blob/master/src/extension/notebookProvider.ts" target="_blank" rel="noopener noreferrer">Github Issues ç¬”è®°æœ¬<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼šä¸€ä¸ªç¬”è®°æœ¬å†…æ ¸ï¼Œç”¨æ¥æ‰§è¡Œ Github Issues æŸ¥è¯¢</li></ul><h3 id="æœ€ä½³å®è·µ" tabindex="-1"><a class="header-anchor" href="#æœ€ä½³å®è·µ" aria-hidden="true">#</a> æœ€ä½³å®è·µ</h3><p>å°½ç®¡ä¸€ä¸ªç¬”è®°æœ¬å†…æ ¸åªéœ€è¦è¿”å›ä¸€ä¸ªè¾“å‡ºï¼Œå®é™…ä¸Šä½ ä»ç„¶å¯ä»¥åœ¨å…¶æ‰§è¡Œæ¯ä¸€ä¸ªä»£ç å—çš„æ—¶å€™ï¼Œè®¾ç½®ä»£ç å—çš„ <code>metadata</code>ï¼Œå€Ÿæ­¤æ¥å®ç°è¯¸å¦‚æ—¶é—´è®¡æ•°å™¨ã€æ‰§è¡Œå¾½æ ‡æ’åºã€è¿è¡ŒçŠ¶æ€å›¾æ ‡æ­¤ç±»çš„åŠŸèƒ½ã€‚ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>executeCell</code> æ–¹æ³•ï¼š</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">executeCell</span><span class="token punctuation">(</span>
  document<span class="token operator">:</span> vscode<span class="token punctuation">.</span>NotebookDocument<span class="token punctuation">,</span>
  cell<span class="token operator">:</span> vscode<span class="token punctuation">.</span>NotebookCell<span class="token punctuation">,</span>
  token<span class="token operator">:</span> vscode<span class="token punctuation">.</span>CancellationToken
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    cell<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>runState <span class="token operator">=</span> vscode<span class="token punctuation">.</span>NotebookCellRunState<span class="token punctuation">.</span>Running<span class="token punctuation">;</span>
    <span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cell<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>runStartTime <span class="token operator">=</span> start<span class="token punctuation">;</span>
    cell<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>executionOrder <span class="token operator">=</span> <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>runIndex<span class="token punctuation">;</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">doExecuteCell</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> cell<span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    cell<span class="token punctuation">.</span>outputs <span class="token operator">=</span> <span class="token punctuation">[</span>result<span class="token punctuation">]</span><span class="token punctuation">;</span>
    cell<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>runState <span class="token operator">=</span> vscode<span class="token punctuation">.</span>NotebookCellRunState<span class="token punctuation">.</span>Success<span class="token punctuation">;</span>
    cell<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>lastRunDuration <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cell<span class="token punctuation">.</span>outputs <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        outputKind<span class="token operator">:</span> vscode<span class="token punctuation">.</span>CellOutputKind<span class="token punctuation">.</span>Error<span class="token punctuation">,</span>
        ename<span class="token operator">:</span> e<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
        evalue<span class="token operator">:</span> e<span class="token punctuation">.</span>message<span class="token punctuation">,</span>
        traceback<span class="token operator">:</span> <span class="token punctuation">[</span>e<span class="token punctuation">.</span>stack<span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
    cell<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>runState <span class="token operator">=</span> vscode<span class="token punctuation">.</span>NotebookCellRunState<span class="token punctuation">.</span>Error<span class="token punctuation">;</span>
    cell<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>lastRunDuration <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è¾“å‡ºç±»å‹" tabindex="-1"><a class="header-anchor" href="#è¾“å‡ºç±»å‹" aria-hidden="true">#</a> è¾“å‡ºç±»å‹</h2><hr><p>è¾“å‡ºçš„ç±»å‹å¿…é¡»å¾—æ˜¯ä»¥ä¸‹è¿™ä¸‰ç§æ ¼å¼ä¸­çš„ä¸€ä¸ªï¼š</p><ul><li>æ–‡æœ¬</li><li>é”™è¯¯</li><li>å¯Œæ–‡æœ¬</li></ul><p>ä¸€ä¸ªä»£ç å—å¦‚æœäº§ç”Ÿå¤šç§è¾“å‡ºï¼Œè¿™ç§æƒ…å†µä¸‹è¾“å‡ºä¸ºä¸€ä¸ªåˆ—è¡¨ã€‚</p><p>ä¸€äº›ç®€å•çš„è¾“å‡ºæ ¼å¼ï¼Œæ¯”å¦‚æ–‡æœ¬ã€é”™è¯¯ã€å¯Œæ–‡æœ¬ï¼ˆHTMLï¼ŒMarkdownï¼ŒJSONï¼‰ï¼Œç”± VS Code æ ¸å¿ƒè¿›ç¨‹è´Ÿè´£æ¸²æŸ“ï¼›è€Œä¸€äº›å¢å¼ºå‹çš„è¾“å‡ºæ ¼å¼ï¼Œæ¯”å¦‚ä¸åº”ç”¨ç›¸å…³çš„å¯Œæ–‡æœ¬è¾“å‡ºç±»å‹ï¼Œåˆ™ç”± <a href="#%E8%BE%93%E5%87%BA%E6%B8%B2%E6%9F%93%E5%99%A8">NotebookOutputRenderer</a> è´Ÿè´£æ¸²æŸ“ã€‚æ’ä»¶å¯ä»¥è‡ªè¡Œæ¸²æŸ“ä¸€äº› â€œç®€å•çš„â€ å¢å¼ºå‹è¾“å‡ºæ ¼å¼ï¼Œæ¯”å¦‚æ·»åŠ  Markdown å¯¹ LaTeX çš„æ”¯æŒã€‚</p><p><img src="https://media.githubusercontent.com/media/microsoft/vscode-docs/master/api/extension-guides/images/notebook/kernel.png" alt="å†…æ ¸"></p><h3 id="æ–‡æœ¬è¾“å‡º" tabindex="-1"><a class="header-anchor" href="#æ–‡æœ¬è¾“å‡º" aria-hidden="true">#</a> æ–‡æœ¬è¾“å‡º</h3><p>æ–‡æœ¬æ˜¯æœ€ç®€å•çš„è¾“å‡ºæ ¼å¼ï¼Œè¾“å‡ºæ–‡æœ¬æ‰€åšçš„å·¥ä½œå’Œå¾ˆå¤šå…¶å®ƒçš„ç¼–è¾‘å™¨ç±»ä¼¼ã€‚æ–‡æœ¬ä»…ç”± <code>æ–‡æœ¬åŸŸ</code> ç»„æˆï¼Œä¼šä»¥æ™®é€šæ–‡æœ¬çš„å½¢å¼è¿›è¡Œæ¸²æŸ“ã€‚</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token punctuation">{</span>
    outputKind<span class="token operator">:</span> vscode<span class="token punctuation">.</span>CellOutputKind<span class="token punctuation">.</span>Text<span class="token punctuation">,</span>
    text<span class="token operator">:</span> <span class="token string">&#39;...&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://media.githubusercontent.com/media/microsoft/vscode-docs/master/api/extension-guides/images/notebook/text-output.png" alt="è¾“å‡ºæ–‡æœ¬"></p><h3 id="é”™è¯¯è¾“å‡º" tabindex="-1"><a class="header-anchor" href="#é”™è¯¯è¾“å‡º" aria-hidden="true">#</a> é”™è¯¯è¾“å‡º</h3><p>é”™è¯¯è¾“å‡ºå¯ä»¥é€šè¿‡ä¸€ç§æ˜“äºç†è§£çš„æ–¹å¼æ¥å±•ç¤ºè¿è¡Œæ—¶å‘ç”Ÿçš„å¼‚å¸¸ã€‚å®ƒåŒ…å« <code>ename</code>ã€<code>evalue</code>ã€<code>traceback</code> è¿™å‡ ä¸ªå±æ€§ï¼Œå‰ä¸¤è€…åˆ†åˆ«ç”¨æ¥å±•ç¤ºé”™è¯¯ç±»å‹å’Œé”™è¯¯ä¿¡æ¯ï¼Œ<code>traceback</code> æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„å¹¶ä»¥è°ƒç”¨æ ˆçš„å½¢å¼å±•ç¤ºã€‚å¹¶ä¸”æ•°ç»„ä¸­çš„å­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨ ANSI ç¼–ç æ¥è¿›è¡Œç€è‰²ï¼š</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token punctuation">{</span>
    outputKind<span class="token operator">:</span> vscode<span class="token punctuation">.</span>CellOutputKind<span class="token punctuation">.</span>Error<span class="token punctuation">,</span>
    ename<span class="token operator">:</span> <span class="token string">&#39;Error Name&#39;</span><span class="token punctuation">,</span>
    evalue<span class="token operator">:</span> <span class="token string">&#39;Error Value&#39;</span><span class="token punctuation">,</span>
    traceback<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;\x1b[35mstack frame 1\x1b[0m&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;stack frame 2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;stack frame 3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;stack frame 4&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://media.githubusercontent.com/media/microsoft/vscode-docs/master/api/extension-guides/images/notebook/error-output.png" alt="è¾“å‡ºé”™è¯¯"></p><h3 id="å¯Œæ–‡æœ¬è¾“å‡º" tabindex="-1"><a class="header-anchor" href="#å¯Œæ–‡æœ¬è¾“å‡º" aria-hidden="true">#</a> å¯Œæ–‡æœ¬è¾“å‡º</h3><p>å¯Œæ–‡æœ¬ä»¥ MIME ç±»å‹ä½œä¸º key å€¼ï¼Œå¯ä»¥ä¸ºè¾“å‡ºçš„æ•°æ®æä¾›å¤šç§ä¸åŒçš„å±•ç°å½¢å¼ï¼Œæ˜¯å±•ç¤ºä»£ç å—çš„æœ€é«˜çº§çš„è¾“å‡ºæ ¼å¼ã€‚å‡å¦‚ä»£ç å—æ˜¯ä¸€ä¸ª Github Issueï¼Œé‚£ä¹ˆå†…æ ¸ä¼šåŸºäºä»£ç å—çš„ <code>data</code> é…ç½®é¡¹ï¼Œäº§ç”Ÿä»¥ä¸‹å‡ ç§ä¸åŒæ ¼å¼çš„è¾“å‡ºï¼š</p><ul><li><code>text/html</code>ï¼šå°† Github Issue è½¬åŒ–ä¸º HTML è¾“å‡º</li><li><code>application/json</code>ï¼šè¾“å‡º JSON æ ¼å¼çš„æ•°æ®</li><li><code>application/github-issue</code>ï¼šå¯ä»¥ä½¿ç”¨ <code>NotebookOutputRenderer</code> æ¥åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„å…³äºè¯¥ Github Issue çš„äº¤äº’å¼è§†å›¾</li></ul><p><code>text/html</code> å’Œ <code>application/json</code> ç”± VS Code è‡ªå·±è´Ÿè´£æ¸²æŸ“ï¼Œè€Œ <code>application/github-issue</code> åˆ™äº¤ç»™ <code>NotebookOutputRenderer</code> è´Ÿè´£æ¸²æŸ“ï¼Œå¦‚æœ MIME ç±»å‹æ²¡æœ‰æ³¨å†Œç›¸åº”çš„ <code>NotebookOutputRenderer</code>ï¼Œé‚£ä¹ˆå°±ä¼šå±•ç¤ºä¸€ä¸ªé”™è¯¯ã€‚</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token punctuation">{</span>
    outputKind<span class="token operator">:</span> vscode<span class="token punctuation">.</span>CellOutputKind<span class="token punctuation">.</span>Rich<span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&#39;text/html&#39;</span><span class="token operator">:</span> <span class="token string">&#39;&lt;b&gt;Hello&lt;/b&gt; World&#39;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&#39;application/json&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span> hello<span class="token operator">:</span> <span class="token string">&#39;world&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string-property property">&#39;application/custom&#39;</span><span class="token operator">:</span> <span class="token string">&#39;my-custom-data-interchange-format&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://media.githubusercontent.com/media/microsoft/vscode-docs/master/api/extension-guides/images/notebook/rich-output.gif" alt="è¾“å‡ºå¯Œæ–‡æœ¬"></p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒVS Code å¯ä»¥æ¸²æŸ“ä»¥ä¸‹å‡ ç§ MIME ç±»å‹ï¼š</p><ul><li>application/json</li><li>application/javascript</li><li>text/html</li><li>image/svg+xml</li><li>text/markdown</li><li>image/png</li><li>image/jpeg</li><li>text/plain</li><li>text/x-javascript</li></ul><p>å¦‚æœä½ æƒ³æ¸²æŸ“å…¶å®ƒç±»å‹çš„ MIMEï¼Œå°±éœ€è¦ä¸ºè¿™ä¸ª MIME æ³¨å†Œä¸€ä¸ª <code>NotebookOutputRenderer</code>ã€‚</p><h2 id="è¾“å‡ºæ¸²æŸ“å™¨" tabindex="-1"><a class="header-anchor" href="#è¾“å‡ºæ¸²æŸ“å™¨" aria-hidden="true">#</a> è¾“å‡ºæ¸²æŸ“å™¨</h2><hr><p>è¾“å‡ºæ¸²æŸ“å™¨è´Ÿè´£æ¥æ”¶å¹¶æ¸²æŸ“ MIME ç±»å‹çš„è¾“å‡ºæ•°æ®ï¼Œæœ€ç»ˆå‘ˆç°çš„æ¸²æŸ“ç»“æœå¯ä»¥æ˜¯ç®€å•çš„ HTMLï¼Œä¹Ÿå¯ä»¥æ˜¯å¤æ‚çš„äº¤äº’å¼åº”ç”¨ç¨‹åºã€‚åœ¨æœ¬èŠ‚ï¼Œæˆ‘ä»¬ä¸€èµ·çœ‹çœ‹å¦‚ä½•æ¸²æŸ“ä¸€ä¸ªå…³äº Github Issue çš„è§†å›¾ã€‚</p><h3 id="ä¸€ä¸ªç®€å•çš„-éäº¤äº’å¼çš„æ¸²æŸ“å™¨" tabindex="-1"><a class="header-anchor" href="#ä¸€ä¸ªç®€å•çš„-éäº¤äº’å¼çš„æ¸²æŸ“å™¨" aria-hidden="true">#</a> ä¸€ä¸ªç®€å•çš„, éäº¤äº’å¼çš„æ¸²æŸ“å™¨</h3><p>ä¸ºäº†æ¸²æŸ“ä¸€ç»„ MIME ç±»å‹çš„æ•°æ®ï¼Œä½ å¯ä»¥åœ¨ä½ çš„æ’ä»¶é¡¹ç›®çš„ <code>package.json</code> æ–‡ä»¶ä¸­çš„ <code>contributes.notebookOutRenderer</code> å­—æ®µä¸‹å£°æ˜æ¸²æŸ“å™¨ã€‚æˆ‘ä»¬å‡è®¾å·²ç»å®‰è£…çš„å†…æ ¸èƒ½å¤Ÿæ­£å¸¸æä¾›æ¸²æŸ“å™¨ï¼Œé‚£ä¹ˆå½“ä½ è¾“å…¥ <code>ms-vscode.github-issue-notebook/github-issue</code> çš„æ—¶å€™ï¼Œè¿™ä¸ªæ¸²æŸ“å™¨å°±ä¼šå¼€å§‹å·¥ä½œã€‚</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;activationEvents&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;....&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;contributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ...
    <span class="token property">&quot;notebookOutputRenderer&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;github-issue-static-renderer&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;displayName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Static Issue Renderer&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;entrypoint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./out/renderer.js&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;mimeTypes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">&quot;ms-vscode.github-issue-notebook/github-issue&quot;</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸ºäº†é¿å…è¾“å‡ºæ¸²æŸ“å™¨å’Œ VS Code çš„ UI å‘ç”Ÿå†²çªï¼Œå¯¼è‡´ VS Code æ€§èƒ½ä¸‹é™ï¼Œè¾“å‡ºæ¸²æŸ“å™¨æ€»æ˜¯è¢«æ”¾åˆ°ä¸€ä¸ªç‹¬ç«‹çš„ <code>iframe</code> ä¸­ã€‚ä¸Šè¿°ä»£ç ä¸­ â€œentrypointâ€ å­—æ®µæŒ‡çš„æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è„šæœ¬æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯è‡ªå·±æ‰‹å†™ï¼Œä¹Ÿå¯ä»¥æ˜¯ Webpackã€Rollupã€Parcel æ‰“åŒ…åçš„æ–‡ä»¶ï¼Œå½“ <code>iframe</code> é‡Œé¢éœ€è¦æ¸²æŸ“å†…å®¹çš„æ—¶å€™ï¼Œå°±ä¼šåŠ è½½è¿™ä¸ªè„šæœ¬ã€‚</p><p>å½“ â€œentrypointâ€ è„šæœ¬åŠ è½½å®Œæˆä¹‹åï¼Œä¼šç«‹åˆ»è°ƒç”¨ <code>acquireNotebookRendererApi()</code> å‡½æ•°å¹¶ä¼ å…¥ä½ çš„æ¸²æŸ“å™¨ ID ä½œä¸ºå‚æ•°ï¼Œä¸æ­¤åŒæ—¶ï¼Œå¼€å§‹ç›‘å¬ç¬”è®°æœ¬çš„è¾“å‡ºäº‹ä»¶ã€‚æ¯”å¦‚ï¼Œä¸‹é¢çš„ä»£ç ä¼šæŠŠæ•´ä¸ª Github Issue ä½œä¸º JSON ä¼ é€’ç»™ä»£ç å—ä½œä¸ºè¾“å‡ºï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> notebookApi <span class="token operator">=</span> <span class="token function">acquireNotebookRendererApi</span><span class="token punctuation">(</span><span class="token string">&#39;github-issue-static-renderer&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

notebookApi<span class="token punctuation">.</span><span class="token function">onDidCreateOutput</span><span class="token punctuation">(</span><span class="token parameter">evt</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> output <span class="token operator">=</span> evt<span class="token punctuation">.</span>output<span class="token punctuation">.</span>data<span class="token punctuation">[</span>evt<span class="token punctuation">.</span>mimeType<span class="token punctuation">]</span><span class="token punctuation">;</span>
  evt<span class="token punctuation">.</span>element<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>output<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®Œæ•´çš„ API å£°æ˜å¯ä»¥ <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/vscode-notebook-renderer/index.d.ts" target="_blank" rel="noopener noreferrer">çœ‹è¿™é‡Œ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚å¦‚æœä½ ç”¨çš„æ˜¯ TypeScriptï¼Œé‚£ä¹ˆä¸ºäº†ä½¿ç”¨ä¸Šè¿°çš„ API å£°æ˜ï¼Œä½ é¦–å…ˆéœ€è¦å®‰è£… <code>@types/vscode-notebook-renderer</code>ï¼Œç„¶ååœ¨ <code>tsconfig.json</code> æ–‡ä»¶çš„ <code>types</code> å­—æ®µä¸­æ·»åŠ  <code>vscode-notebook-renderer</code>ã€‚å› ä¸º <code>acquireNotebookRendererApi</code> æ–¹æ³•æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠ <code>@types/vscode</code> å’Œ <code>@types/vscode-notebook-renderer</code> è¿™ä¸¤ä¸ªå£°æ˜æ–‡ä»¶åˆ†å¼€äº†ã€‚</p><p>è¦åˆ›å»ºå¯Œæ–‡æœ¬å†…å®¹ï¼Œä½ å¯ä»¥æ‰‹åŠ¨åˆ›å»º DOM å…ƒç´ ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨ Preact è¿™æ ·çš„æ¡†æ¶ï¼Œå°†å†…å®¹ç›´æ¥æ³¨å…¥åˆ°æŒ‡å®šçš„å…ƒç´ ï¼Œçœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> h<span class="token punctuation">,</span> render <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;preact&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> notebookApi <span class="token operator">=</span> <span class="token function">acquireNotebookRendererApi</span><span class="token punctuation">(</span><span class="token string">&quot;github-issue-static-renderer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Issue<span class="token operator">:</span> FunctionComponent<span class="token operator">&lt;</span><span class="token punctuation">{</span> issue<span class="token operator">:</span> GithubIssue <span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> issue <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>issue<span class="token punctuation">.</span><span class="token builtin">number</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>issue<span class="token punctuation">.</span>title<span class="token punctuation">}</span>
      <span class="token punctuation">(</span><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://github.com/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>issue<span class="token punctuation">.</span>repo<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/issues/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>issue<span class="token punctuation">.</span><span class="token builtin">number</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span>#<span class="token punctuation">{</span>issue<span class="token punctuation">.</span><span class="token builtin">number</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>issue<span class="token punctuation">.</span>user<span class="token punctuation">.</span>avatar_url<span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> float<span class="token operator">:</span> <span class="token string">&#39;left&#39;</span><span class="token punctuation">,</span> width<span class="token operator">:</span> <span class="token number">32</span><span class="token punctuation">,</span> borderRadius<span class="token operator">:</span> <span class="token string">&#39;50%&#39;</span><span class="token punctuation">,</span> marginRight<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>i<span class="token operator">&gt;</span>@<span class="token punctuation">{</span>issue<span class="token punctuation">.</span>user<span class="token punctuation">.</span>login<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span> Opened<span class="token operator">:</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">&quot;margin-top: 10px&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>issue<span class="token punctuation">.</span>body<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> GithubIssues<span class="token operator">:</span> FunctionComponent<span class="token operator">&lt;</span><span class="token punctuation">{</span> issues<span class="token operator">:</span> GithubIssue<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> issues <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>issues<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>issue <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>Issue key<span class="token operator">=</span><span class="token punctuation">{</span>issue<span class="token punctuation">.</span><span class="token builtin">number</span><span class="token punctuation">}</span> issue<span class="token operator">=</span><span class="token punctuation">{</span>issue<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

notebookApi<span class="token punctuation">.</span><span class="token function">onDidCreateOutput</span><span class="token punctuation">(</span><span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> output <span class="token operator">=</span> evt<span class="token punctuation">.</span>output<span class="token punctuation">.</span>data<span class="token punctuation">[</span>evt<span class="token punctuation">.</span>mimeType<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>GithubIssues issues<span class="token operator">=</span><span class="token punctuation">{</span>output<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> evt<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨å¯ä»¥åœ¨è¾“å‡ºä»£ç å—ä¸Šé€šè¿‡è¿è¡Œ <code>ms-vscode.github-issue-notebook/github-issue</code> æ¥é¢„è§ˆç»“æœï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://media.githubusercontent.com/media/microsoft/vscode-docs/master/api/extension-guides/images/notebook/static-renderer-sample.png" alt="é™æ€çš„æ¸²æŸ“å™¨ç¤ºä¾‹"></p><p>å¦‚æœåœ¨ä»£ç å—çš„ DOM å®¹å™¨å¤–éƒ¨æœ‰å…¶å®ƒçš„å…ƒç´ ï¼Œæˆ–è€…æœ‰ä¸€äº›å¼‚æ­¥ä»»åŠ¡ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨ <code>onWillDestroyOutput</code> æ–¹æ³•ä¸­è¿›è¡Œé‡Šæ”¾ã€‚<code>onWillDestroyOutput</code>æ–¹æ³•ä¼šåœ¨ä»¥ä¸‹å‡ ä¸ªæ¡ä»¶ä¸‹æ‰§è¡Œï¼š</p><ul><li>ä»£ç å—è¾“å‡ºè¢«æ¸…ç©ºå</li><li>å½“å‰ä»£ç å—è¢«åˆ é™¤ä¹‹å</li><li>å½“å‰ä»£ç å—çš„è¾“å‡ºè¿›è¡Œæ¸²æŸ“ä¹‹å‰</li></ul><p>å¯ä»¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> intervals <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

notebookApi<span class="token punctuation">.</span><span class="token function">onDidCreateOutput</span><span class="token punctuation">(</span><span class="token parameter">evt</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> output <span class="token operator">=</span> evt<span class="token punctuation">.</span>output<span class="token punctuation">.</span>data<span class="token punctuation">[</span>evt<span class="token punctuation">.</span>mimeType<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>GithubIssues issues<span class="token operator">=</span><span class="token punctuation">{</span>output<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> evt<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// åˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨ï¼Œåœ¨æ¯ä¸€ç§’è¿›è¡Œä¿®æ”¹ h2 çš„é¢œè‰²</span>
  intervals<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>
    evt<span class="token punctuation">.</span>outputId<span class="token punctuation">,</span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      evt<span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;h2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hsl(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>
        <span class="token number">360</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, 100%, 50%)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

notebookApi<span class="token punctuation">.</span><span class="token function">onWillDestroyOutput</span><span class="token punctuation">(</span><span class="token parameter">scope</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>scope <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¦‚æœ scope æ˜¯ undefined çš„è¯ï¼Œæ‰€æœ‰çš„è¾“å‡ºéƒ½ä¼šè¢«é”€æ¯</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> interval <span class="token keyword">of</span> intervals<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    intervals<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// åä¹‹ï¼Œé”€æ¯ä¸€ä¸ªå•ç‹¬çš„è¾“å‡º</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>intervals<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>scope<span class="token punctuation">.</span>outputId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    intervals<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>scope<span class="token punctuation">.</span>outputId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½ å¿…é¡»ç‰¢è®°åœ¨å¿ƒçš„æ˜¯ï¼Œä¸€ä¸ªç¬”è®°æœ¬ä¸­çš„æ¯ä¸ªä»£ç å—ï¼Œä¼šè¢«æ¸²æŸ“åˆ°åŒä¸€ä¸ª iframe çš„ä¸åŒ DOM å…ƒç´ ä¸Šï¼Œæ‰€ä»¥ä¸ºäº†é¿å…äº§ç”Ÿå†²çªï¼Œå½“ä½ ä½¿ç”¨è¯¸å¦‚ <code>document.querySelector</code> æ­¤ç±»çš„é€‰æ‹©å™¨çš„æ—¶å€™ï¼Œè¦ç¡®ä¿æ¯ä¸ªä»£ç å—éƒ½æœ‰ä¸€ä¸ªç‰¹å®šçš„æ ‡è¯†ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ä½¿ç”¨ <code>evt.element.querySelector</code> æ¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚</p><h3 id="äº¤äº’å¼çš„ç¬”è®°æœ¬" tabindex="-1"><a class="header-anchor" href="#äº¤äº’å¼çš„ç¬”è®°æœ¬" aria-hidden="true">#</a> äº¤äº’å¼çš„ç¬”è®°æœ¬</h3><p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬æƒ³é€šè¿‡ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œç„¶åæŸ¥çœ‹è¿™ä¸ª Github Issue çš„è¯„è®ºï¼Œåº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å‡è®¾åœ¨è¿è¡Œ <code>ms-vscode.github-issue-notebook/github-issue-with-comments</code> å‘½ä»¤ä¹‹åï¼Œå†…æ ¸ï¼ˆ<code>kernel</code>ï¼‰å¯ä»¥æ­£å¸¸æä¾›å¸¦æœ‰è¯„è®ºçš„ Github Issueï¼Œä¸‹é¢æ˜¯ä»£ç å®ç°ï¼š</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> Issue<span class="token operator">:</span> FunctionComponent<span class="token operator">&lt;</span><span class="token punctuation">{</span> issue<span class="token operator">:</span> GithubIssueWithComments <span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> issue <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>showComments<span class="token punctuation">,</span> setShowComments<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>issue<span class="token punctuation">.</span><span class="token builtin">number</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>issue<span class="token punctuation">.</span>title<span class="token punctuation">}</span>
        <span class="token punctuation">(</span><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://github.com/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>issue<span class="token punctuation">.</span>repo<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/issues/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>issue<span class="token punctuation">.</span><span class="token builtin">number</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span>#<span class="token punctuation">{</span>issue<span class="token punctuation">.</span><span class="token builtin">number</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span><span class="token punctuation">)</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>issue<span class="token punctuation">.</span>user<span class="token punctuation">.</span>avatar_url<span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> float<span class="token operator">:</span> <span class="token string">&#39;left&#39;</span><span class="token punctuation">,</span> width<span class="token operator">:</span> <span class="token number">32</span><span class="token punctuation">,</span> borderRadius<span class="token operator">:</span> <span class="token string">&#39;50%&#39;</span><span class="token punctuation">,</span> marginRight<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>i<span class="token operator">&gt;</span>@<span class="token punctuation">{</span>issue<span class="token punctuation">.</span>user<span class="token punctuation">.</span>login<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span> Opened<span class="token operator">:</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">&quot;margin-top: 10px&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>issue<span class="token punctuation">.</span>body<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setShowComments</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Show Comments<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>showComments <span class="token operator">&amp;&amp;</span> issue<span class="token punctuation">.</span>comments<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>comment <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>comment<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢çš„ä»£ç å­˜åœ¨å‡ ä¸ªæ˜æ˜¾çš„é—®é¢˜ï¼š</p><ul><li>åœ¨ç‚¹å‡»æŒ‰é’®ä¹‹å‰ï¼Œå°±å·²ç»æŠŠæ‰€æœ‰ Issue çš„è¯„è®ºéƒ½åŠ è½½äº†</li><li>ä»…ä»…æ˜¯å±•ç¤ºæ›´å¤šæ•°æ®ï¼Œå°±éœ€è¦ä¸ºæ‰€æœ‰ä¸åŒçš„ MIME ç±»å‹æä¾›ç¬”è®°æœ¬å†…æ ¸ï¼ˆ<code>kernel</code>ï¼‰çš„æ”¯æŒ</li></ul><p>å†…æ ¸å¯ä»¥ç»™æ¸²æŸ“å™¨æä¾›é¢å¤–çš„åŠŸèƒ½ï¼Œæ¯”å¦‚æ·»åŠ ä¸€ä¸ªé¢„åŠ è½½å™¨ï¼ŒVS Code ä¼šå°†é¢„åŠ è½½å™¨é‡Œå†…å®¹ä¹Ÿè£…è½½åˆ° iframe é‡Œã€‚è¿™ä¸ªåŠ è½½é¡¹è„šæœ¬å¯ä»¥é€šè¿‡å…¶è‡ªèº«çš„ postMessage æ¥å£æ¥è®¿é—® <code>acquireVsCodeApi()</code>ï¼Œä½ å¯ä»¥æŠŠå®ƒå°è£…ä¸º iframe ä¸­çš„å…¨å±€å¯¹è±¡ã€‚</p><p><img src="https://media.githubusercontent.com/media/microsoft/vscode-docs/master/api/extension-guides/images/notebook/kernel-communication.png" alt="å†…æ ¸é€šè®¯"></p><p>ä¸¾ä¸ªä¾‹å­ï¼Œä½ å¯èƒ½ä¼šä¿®æ”¹å†…æ ¸ä¸­çš„ <code>preloads</code> æ¥å¼•ç”¨ä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶é‡Œä½ åˆ›å»ºäº†ä¸€ä¸ªä¸æ’ä»¶ä¸»æœºé€šä¿¡çš„è¿æ¥ï¼Œå¹¶æš´éœ²äº†ä¸€ä¸ªå…¨å±€å¯¹è±¡ä¾›æ¸²æŸ“å™¨ä½¿ç”¨ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>globalThis<span class="token punctuation">.</span>githubIssueCommentProvider <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">loadComments</span><span class="token punctuation">(</span>issueId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span>comments<span class="token operator">:</span> GithubComment<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    vscodeApi<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> command<span class="token operator">:</span> <span class="token string">&#39;comments&#39;</span><span class="token punctuation">,</span> issueId <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">listener</span> <span class="token operator">=</span> event <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&#39;comments&#39;</span> <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">.</span>data<span class="token punctuation">.</span>issueId <span class="token operator">===</span> issueId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">.</span>comments<span class="token punctuation">)</span><span class="token punctuation">;</span>
        window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span> listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span> listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±äºå…¶ä»–å¼€å‘è€…å¯èƒ½åœ¨å…¶å®ƒçš„ç¬”è®°æœ¬ä¸Šåˆ›å»ºäº† Github Issue è¾“å‡ºï¼Œå¹¶ä¸”æ²¡æœ‰å®ç° <code>githubIssueCommentProvider</code>ï¼Œå› æ­¤åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨æ¸²æŸ“å™¨ä¸­é¦–å…ˆè¦åˆ¤æ–­é¢„åŠ è½½è„šæœ¬ä¸­çš„å…¨å±€å¯¹è±¡æ˜¯å¦å­˜åœ¨å¹¶ä¸”å¯ç”¨ï¼Œå¹¶ä¸”åªåœ¨å¯ç”¨çš„æƒ…å†µä¸‹æ˜¾ç¤º â€œLoad Commentsï¼ˆåŠ è½½è¯„è®ºï¼‰â€ æŒ‰é’®ï¼š</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> canLoadComments <span class="token operator">=</span> globalThis<span class="token punctuation">.</span>githubIssueCommentProvider <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Issue<span class="token operator">:</span> FunctionComponent<span class="token operator">&lt;</span><span class="token punctuation">{</span> issue<span class="token operator">:</span> GithubIssue <span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> issue <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>comments<span class="token punctuation">,</span> setComments<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">loadComments</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    globalThis<span class="token punctuation">.</span>githubIssueCommentProvider<span class="token punctuation">.</span><span class="token function">loadComments</span><span class="token punctuation">(</span>issue<span class="token punctuation">.</span>id<span class="token punctuation">,</span> setComments<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>issue<span class="token punctuation">.</span><span class="token builtin">number</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>issue<span class="token punctuation">.</span>title<span class="token punctuation">}</span>
        <span class="token punctuation">(</span><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://github.com/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>issue<span class="token punctuation">.</span>repo<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/issues/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>issue<span class="token punctuation">.</span><span class="token builtin">number</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span>#<span class="token punctuation">{</span>issue<span class="token punctuation">.</span><span class="token builtin">number</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span><span class="token punctuation">)</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>issue<span class="token punctuation">.</span>user<span class="token punctuation">.</span>avatar_url<span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> float<span class="token operator">:</span> <span class="token string">&#39;left&#39;</span><span class="token punctuation">,</span> width<span class="token operator">:</span> <span class="token number">32</span><span class="token punctuation">,</span> borderRadius<span class="token operator">:</span> <span class="token string">&#39;50%&#39;</span><span class="token punctuation">,</span> marginRight<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>i<span class="token operator">&gt;</span>@<span class="token punctuation">{</span>issue<span class="token punctuation">.</span>user<span class="token punctuation">.</span>login<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span> Opened<span class="token operator">:</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">&quot;margin-top: 10px&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>issue<span class="token punctuation">.</span>body<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>canLoadComments <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>loadComments<span class="token punctuation">}</span><span class="token operator">&gt;</span>Load Comments<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token punctuation">}</span>
      <span class="token punctuation">{</span>comments<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>comment <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>comment<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åï¼Œå‡è®¾æˆ‘ä»¬æƒ³è¦ä¸ webview å»ºç«‹é€šä¿¡ã€‚æ–‡æ¡£é€‰ä¸­å†…æ ¸æ—¶ä¼šè°ƒç”¨ <code>NotebookKernelProvider.resolveKernel</code>ï¼Œç„¶åä½ å°±å¯ä»¥å¾€è¯¥æ–¹æ³•ä¸­æä¾›å¼•ç”¨åˆ° webview å¯¹è±¡çš„å‚æ•°å®ç°é€šä¿¡äº†ã€‚è¦å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç»™ <code>onDidReceiveMessage</code> æ–¹æ³•è®¾ç½®ä¸€ä¸ªç›‘å¬å™¨ï¼š</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MyKernelProvider</span> <span class="token keyword">extends</span> <span class="token class-name">vscode</span><span class="token punctuation">.</span>NotebookKernelProvider <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>

  <span class="token keyword">public</span> <span class="token function">resolveKernel</span><span class="token punctuation">(</span>kernel<span class="token punctuation">,</span> document<span class="token punctuation">,</span> webview<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    webview<span class="token punctuation">.</span><span class="token function">onDidReceiveMessage</span><span class="token punctuation">(</span>message <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span>command <span class="token operator">===</span> <span class="token string">&#39;comments&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        kernel<span class="token punctuation">.</span><span class="token function">getCommentsForIssue</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>issueId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>comments <span class="token operator">=&gt;</span> webview<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">&#39;comments&#39;</span><span class="token punctuation">,</span>
          issueId<span class="token operator">:</span> message<span class="token punctuation">.</span>issueId<span class="token punctuation">,</span>
          comments<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è°ƒè¯•æ”¯æŒ" tabindex="-1"><a class="header-anchor" href="#è°ƒè¯•æ”¯æŒ" aria-hidden="true">#</a> è°ƒè¯•æ”¯æŒ</h2><hr><p>å¯¹äºä¸€äº›å®ç°äº†æ”¯æŒç¼–ç¨‹è¯­è¨€ç‰¹æ€§çš„ç¬”è®°æœ¬å†…æ ¸ï¼Œæ”¯æŒä»£ç å—çš„è°ƒè¯•æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼æ¥ä¸ºå†…æ ¸æ·»åŠ è°ƒè¯•æ”¯æŒï¼š</p><ul><li>å¯ä»¥åˆ©ç”¨ç¬”è®°æœ¬å†…æ ¸å®ç°ä¸€ä¸ª <a href="/extension-guides/debugger-extension.html" class="">è°ƒè¯•å™¨æ’ä»¶</a></li><li>ç›´æ¥å®ç°ä¸€ä¸ª <a href="https://microsoft.github.io/debug-adapter-protocol/" target="_blank" rel="noopener noreferrer">è°ƒè¯•å™¨åè®®(DAP)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>é€šè¿‡ä»£ç†ï¼Œå°†åè®®è½¬æ¢ä¸ºç°æœ‰çš„ç¬”è®°æœ¬è°ƒè¯•å™¨ï¼ˆæŸ¥é˜… â€˜vscode-simple-jupyter-notebookâ€™ï¼‰</li></ul><p>å½“ç„¶ï¼Œæœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨ç°æœ‰çš„æœªç»ä¿®æ”¹çš„è°ƒè¯•å™¨æ’ä»¶ï¼Œå¹¶å°†è°ƒè¯•å™¨åè®®ï¼ˆDAPï¼‰è½¬åŒ–ä¸ºç¬¦åˆå½“å‰ç¬”è®°æœ¬è¦æ±‚çš„åè®®ï¼ˆæŸ¥é˜… â€˜vscode-nodebookâ€™ï¼‰ã€‚</p><p>æœ€åé™„ä¸Šæ¡ˆä¾‹ï¼š</p><ul><li><a href="https://github.com/microsoft/vscode-nodebook" target="_blank" rel="noopener noreferrer">vscode-nodebook<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼šåŸºäº VS Code å†…ç½®çš„ JavaScript è°ƒè¯•å™¨å’Œä¸€äº›ç®€å•çš„è½¬æ¢åè®®ï¼Œæä¾›çš„ Node.js ç¬”è®°æœ¬è°ƒè¯•å™¨</li><li><a href="https://github.com/microsoft/vscode-simple-jupyter-notebook" target="_blank" rel="noopener noreferrer">vscode-simple-jupyter-notebook<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼šåŸºäºå·²å­˜çš„ Xeus è°ƒè¯•å™¨</li></ul></div><!----><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><a href="/06.extension-guides/06.webview.html" class="nav-link prev" aria-label="Webview API"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->Webview API</div></a><a href="/06.extension-guides/08.virtual-documents.html" class="nav-link next" aria-label="è™šæ‹Ÿæ–‡æ¡£"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">è™šæ‹Ÿæ–‡æ¡£<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer"><a  href='http://beian.miit.gov.cn/' target='_blank'>æ¸ICPå¤‡17004152å·-4 | Copyright Â©  oorzc</a></div><!----></footer><!--]--></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app.ed9f300c.js" defer></script>
  </body>
</html>
